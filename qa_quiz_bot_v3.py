import asyncio
import random
from aiogram import Bot, Dispatcher, F, types
from aiogram.filters import Command
from aiogram.types import ReplyKeyboardMarkup, KeyboardButton

API_TOKEN = "8261330449:AAHdv1aWGEZaVgtrV4sgnQCrb38ohLUPA40"

bot = Bot(token=API_TOKEN)
dp = Dispatcher()

# üí° –í—Å—Ç–∞–≤—å —Å–≤–æ–π —Å–ø–∏—Å–æ–∫ –∏–∑ 50+ –≤–æ–ø—Ä–æ—Å–æ–≤ —Å—é–¥–∞
all_questions = [
    {
        "question": "–©–æ —Ç–∞–∫–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –ø—Ä–æ–≥—Ä–∞–º–Ω–æ–≥–æ –∑–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è?",
        "options": [
            "–ü—Ä–æ—Ü–µ—Å —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–æ–¥—É",
            "–ü—Ä–æ—Ü–µ—Å –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏, —á–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –ø—Ä–æ–≥—Ä–∞–º–∞ –≤–∏–º–æ–≥–∞–º",
            "–ü—Ä–æ—Ü–µ—Å –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –ø—Ä–æ–≥—Ä–∞–º–∏",
            "–ü—Ä–æ—Ü–µ—Å –Ω–∞–ø–∏—Å–∞–Ω–Ω—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó"
        ],
        "answer": 1,
        "explanation": "–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è ‚Äî —Ü–µ –ø—Ä–æ—Ü–µ—Å –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏, —á–∏ –ø—Ä–∞—Ü—é—î –ø—Ä–æ–≥—Ä–∞–º–∞ –∑–≥—ñ–¥–Ω–æ –∑ –≤–∏–º–æ–≥–∞–º–∏."
    },
    {
        "question": "–©–æ —Ç–∞–∫–µ –±–∞–≥ (bug)?",
        "options": [
            "–§—É–Ω–∫—Ü—ñ—è –ø—Ä–æ–≥—Ä–∞–º–∏",
            "–û—á—ñ–∫—É–≤–∞–Ω–∞ –ø–æ–≤–µ–¥—ñ–Ω–∫–∞",
            "–ü–æ–º–∏–ª–∫–∞ –∞–±–æ –¥–µ—Ñ–µ–∫—Ç —É –ø—Ä–æ–≥—Ä–∞–º—ñ",
            "–î–æ–∫—É–º–µ–Ω—Ç –¥–ª—è —Ä–æ–∑—Ä–æ–±–Ω–∏–∫–∞"
        ],
        "answer": 2,
        "explanation": "–ë–∞–≥ ‚Äî —Ü–µ –ø–æ–º–∏–ª–∫–∞, —è–∫–∞ –ø—Ä–∏–∑–≤–æ–¥–∏—Ç—å –¥–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ—ó —Ä–æ–±–æ—Ç–∏ –ø—Ä–æ–≥—Ä–∞–º–∏."
    },
    {
        "question": "–©–æ —Ç–∞–∫–µ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ–π–Ω–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è?",
        "options": [
            "–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –æ–∫—Ä–µ–º–∏—Ö –º–æ–¥—É–ª—ñ–≤",
            "–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –≤–∑–∞—î–º–æ–¥—ñ—ó –º—ñ–∂ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏",
            "–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É",
            "–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –≥—Ä–∞—Ñ—ñ–∫–∏"
        ],
        "answer": 1,
        "explanation": "–Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ–π–Ω–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –ø–µ—Ä–µ–≤—ñ—Ä—è—î, —è–∫ –≤–∑–∞—î–º–æ–¥—ñ—é—Ç—å –º—ñ–∂ —Å–æ–±–æ—é —á–∞—Å—Ç–∏–Ω–∏ —Å–∏—Å—Ç–µ–º–∏."
    },
    {
        "question": "–©–æ —Ç–∞–∫–µ unit-—Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è?",
        "options": [
            "–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –ª–∏—à–µ UI",
            "–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ",
            "–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –æ–∫—Ä–µ–º–∏—Ö —Ñ—É–Ω–∫—Ü—ñ–π —á–∏ –º–µ—Ç–æ–¥—ñ–≤",
            "–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó"
        ],
        "answer": 2,
        "explanation": "Unit-—Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –ø–µ—Ä–µ–≤—ñ—Ä—è—î –æ–∫—Ä–µ–º—ñ –æ–¥–∏–Ω–∏—Ü—ñ –∫–æ–¥—É, —è–∫ –ø—Ä–∞–≤–∏–ª–æ, —Ñ—É–Ω–∫—Ü—ñ—ó –∞–±–æ –º–µ—Ç–æ–¥–∏."
    },
    {
        "question": "–Ø–∫–∞ –æ—Å–Ω–æ–≤–Ω–∞ –º–µ—Ç–∞ smoke-—Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è?",
        "options": [
            "–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —á–∏ –ø—Ä–∞—Ü—é—é—Ç—å –æ—Å–Ω–æ–≤–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó –ø—Ä–æ–≥—Ä–∞–º–∏",
            "–ü–æ–≤–Ω—ñ—Å—Ç—é –ø—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏ —Å–∏—Å—Ç–µ–º—É",
            "–ó–Ω–∞–π—Ç–∏ –¥—Ä—ñ–±–Ω—ñ –ø–æ–º–∏–ª–∫–∏",
            "–û—Ü—ñ–Ω–∏—Ç–∏ –¥–∏–∑–∞–π–Ω"
        ],
        "answer": 0,
        "explanation": "Smoke-—Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è ‚Äî –ø–æ–≤–µ—Ä—Ö–Ω–µ–≤–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∂–∏—Ç—Ç—î–∑–¥–∞—Ç–Ω–æ—Å—Ç—ñ –ø—Ä–æ–¥—É–∫—Ç—É."
    },
    {
        "question": "–©–æ —Ç–∞–∫–µ sandbox —É QA?",
        "options": [
            "–ü—ñ—Å–æ—á–Ω–∏—Ü—è –¥–ª—è –¥—ñ—Ç–µ–π",
            "–Ü–∑–æ–ª—å–æ–≤–∞–Ω–µ —Å–µ—Ä–µ–¥–æ–≤–∏—â–µ –¥–ª—è –±–µ–∑–ø–µ—á–Ω–æ–≥–æ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è",
            "–°–µ—Ä–µ–¥–æ–≤–∏—â–µ –¥–ª—è —Ä–µ–ª—ñ–∑—É",
            "–ë–∞–∑–æ–≤–∞ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∞"
        ],
        "answer": 1,
        "explanation": "Sandbox ‚Äî —Ü–µ —ñ–∑–æ–ª—å–æ–≤–∞–Ω–µ —Å–µ—Ä–µ–¥–æ–≤–∏—â–µ –¥–ª—è –±–µ–∑–ø–µ—á–Ω–æ–≥–æ –µ–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—É–≤–∞–Ω–Ω—è —Ç–∞ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è."
    },
    {
        "question": "–©–æ —Ç–∞–∫–µ TMS —É —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—ñ?",
        "options": [
            "Test Management System",
            "Technical Manual System",
            "Trusted Module System",
            "Test Metrics Source"
        ],
        "answer": 0,
        "explanation": "TMS ‚Äî —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –∫–µ—Ä—É–≤–∞–Ω–Ω—è —Ç–µ—Å—Ç-–∫–µ–π—Å–∞–º–∏, –ø–ª–∞–Ω–∞–º–∏, –∑–≤—ñ—Ç–∞–º–∏ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, TestRail, Zephyr)."
    },
    {
        "question": "–Ø–∫–∏–π –∑ –Ω–∏–∂—á–µ –Ω–∞–≤–µ–¥–µ–Ω–∏—Ö —î –ø—Ä–∏–∫–ª–∞–¥–æ–º —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è?",
        "options": [
            "–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è —á–∞—Å—É –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è",
            "–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É",
            "–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –ª–æ–≥—ñ–∫–∏ –ª–æ–≥—ñ–Ω—É",
            "–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è —Å—Ç–∞–±—ñ–ª—å–Ω–æ—Å—Ç—ñ"
        ],
        "answer": 2,
        "explanation": "–§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –ø–µ—Ä–µ–≤—ñ—Ä—è—î, —á–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è–º."
    },
    {
        "question": "–©–æ —Ç–∞–∫–µ –±–∞–≥-—Ñ—ñ–∫—Å?",
        "options": [
            "–í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –ø–æ–º–∏–ª–∫–∏",
            "–ù–∞–ø–∏—Å–∞–Ω–Ω—è –Ω–æ–≤–æ–≥–æ –º–æ–¥—É–ª—è",
            "–û–Ω–æ–≤–ª–µ–Ω–Ω—è —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É",
            "–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç—ñ–≤"
        ],
        "answer": 0,
        "explanation": "–ë–∞–≥-—Ñ—ñ–∫—Å ‚Äî —Ü–µ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –∑–Ω–∞–π–¥–µ–Ω–æ—ó –ø–æ–º–∏–ª–∫–∏ –≤ –∫–æ–¥—ñ."
    },
    {
        "question": "–©–æ –æ–∑–Ω–∞—á–∞—î —Å—Ç–∞—Ç—É—Å 'In Progress' —É –±–∞–≥-—Ä–µ–ø–æ—Ä—Ç—ñ?",
        "options": [
            "–ë–∞–≥ –∑–∞–∫—Ä–∏—Ç–∏–π",
            "–ë–∞–≥ –Ω–µ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–æ",
            "–ë–∞–≥ –≤ –ø—Ä–æ—Ü–µ—Å—ñ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è",
            "–ë–∞–≥ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ"
        ],
        "answer": 2,
        "explanation": "In Progress ‚Äî –ø–æ–º–∏–ª–∫–∞ –≤ —Ä–æ–±–æ—Ç—ñ: –Ω–∞–¥ –Ω–µ—é –ø—Ä–∞—Ü—é—î —Ä–æ–∑—Ä–æ–±–Ω–∏–∫."
    },
    {
        "question": "–©–æ —Ç–∞–∫–µ code freeze?",
        "options": [
            "–ö–æ–ª–∏ –∫–æ–¥ –∑–∞–º–æ—Ä–æ–∂—É—î—Ç—å—Å—è –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É",
            "–ö–æ–ª–∏ —Å–µ—Ä–≤–µ—Ä –∑–∞–≤–∏—Å–∞—î",
            "–ö–æ–ª–∏ —Å–∏—Å—Ç–µ–º–∞ –≤–∏–º–∏–∫–∞—î—Ç—å—Å—è",
            "–ö–æ–ª–∏ –±–ª–æ–∫—É—é—Ç—å —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è"
        ],
        "answer": 0,
        "explanation": "Code freeze ‚Äî –µ—Ç–∞–ø, –∫–æ–ª–∏ –∑–∞–±–æ—Ä–æ–Ω–µ–Ω—ñ –Ω–æ–≤—ñ –∑–º—ñ–Ω–∏ –≤ –∫–æ–¥ –ø–µ—Ä–µ–¥ —Ä–µ–ª—ñ–∑–æ–º."
    },
    {
        "question": "–Ø–∫–∞ —Ä–æ–ª—å QA –≤ Agile-–∫–æ–º–∞–Ω–¥—ñ?",
        "options": [
            "–õ–∏—à–µ –ø–∏—Å–∞—Ç–∏ –±–∞–≥–∏",
            "–ë—É—Ç–∏ –Ω–µ–∑–∞–ª–µ–∂–Ω–∏–º –≤—ñ–¥ —Ä–æ–∑—Ä–æ–±–∫–∏",
            "–ë—É—Ç–∏ —á–∞—Å—Ç–∏–Ω–æ—é –∫–æ–º–∞–Ω–¥–∏, –∑–∞–±–µ–∑–ø–µ—á—É–≤–∞—Ç–∏ —è–∫—ñ—Å—Ç—å –Ω–∞ –≤—Å—ñ—Ö –µ—Ç–∞–ø–∞—Ö",
            "–ù–µ –±—Ä–∞—Ç–∏ —É—á–∞—Å—Ç—ñ —É —Å–ø—Ä–∏–Ω—Ç–∞—Ö"
        ],
        "answer": 2,
        "explanation": "QA ‚Äî –ø–æ–≤–Ω–æ—Ü—ñ–Ω–Ω–∏–π —É—á–∞—Å–Ω–∏–∫ Agile-–∫–æ–º–∞–Ω–¥–∏, –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω–∏–π –∑–∞ —è–∫—ñ—Å—Ç—å –Ω–∞ –≤—Å—ñ—Ö –µ—Ç–∞–ø–∞—Ö."
    },
    {
        "question": "–Ø–∫–∞ –º–µ—Ç–∞ —Ä–µ—Ç—Ä–æ—Å–ø–µ–∫—Ç–∏–≤–∏ –≤ Scrum?",
        "options": [
            "–ü—Ä–æ–≤–µ—Å—Ç–∏ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è",
            "–û—Ü—ñ–Ω–∏—Ç–∏ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –∑–∞–¥–∞—á",
            "–ü–æ–ª—ñ–ø—à–∏—Ç–∏ –ø—Ä–æ—Ü–µ—Å —Ä–æ–∑—Ä–æ–±–∫–∏ —Ç–∞ –≤–∑–∞—î–º–æ–¥—ñ—ó",
            "–û–Ω–æ–≤–∏—Ç–∏ –±–µ–∫–ª–æ–≥"
        ],
        "answer": 2,
        "explanation": "–†–µ—Ç—Ä–æ—Å–ø–µ–∫—Ç–∏–≤–∞ –¥–æ–∑–≤–æ–ª—è—î –∫–æ–º–∞–Ω–¥—ñ –æ—Ü—ñ–Ω–∏—Ç–∏ —Ä–æ–±–æ—Ç—É —Ç–∞ –∑–Ω–∞–π—Ç–∏ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ –¥–ª—è –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è."
    },
    {
        "question": "–©–æ —Ç–∞–∫–µ Acceptance Criteria?",
        "options": [
            "–£–º–æ–≤–∏ –ø—Ä–∏–π–Ω—è—Ç—Ç—è –∑–∞–≤–¥–∞–Ω–Ω—è",
            "–ö–æ–¥ —Ä–µ–≤'—é",
            "–ú–µ—Ç—Ä–∏–∫–∞ —à–≤–∏–¥–∫–æ–¥—ñ—ó",
            "–î–æ–∫—É–º–µ–Ω—Ç –ø–æ–º–∏–ª–æ–∫"
        ],
        "answer": 0,
        "explanation": "Acceptance Criteria ‚Äî —É–º–æ–≤–∏, —è–∫—ñ –º–∞—é—Ç—å –±—É—Ç–∏ –≤–∏–∫–æ–Ω–∞–Ω—ñ –¥–ª—è –ø—Ä–∏–π–Ω—è—Ç—Ç—è –∑–∞–¥–∞—á—ñ."
    },
    {
        "question": "–©–æ —Ç–∞–∫–µ Load Testing?",
        "options": [
            "–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –ø—Ä–∏ –≤–∏—Å–æ–∫–æ–º—É –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ",
            "–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –±–µ–∑ –¥–∞–Ω–∏—Ö",
            "–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è —à–≤–∏–¥–∫–æ—Å—Ç—ñ –º–µ—Ä–µ–∂—ñ",
            "–†—É—á–Ω–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è"
        ],
        "answer": 0,
        "explanation": "Load Testing ‚Äî —Ü–µ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞, —è–∫ —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–∞—Ü—é—î –ø—ñ–¥ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è–º."
    },
    {
        "question": "–©–æ —Ç–∞–∫–µ Jenkins —É QA?",
        "options": [
            "CI/CD —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—ó –ø—Ä–æ—Ü–µ—Å—ñ–≤",
            "–Ü–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è UI",
            "–°–µ—Ä–≤—ñ—Å –ø—ñ–¥—Ç—Ä–∏–º–∫–∏",
            "–ú–µ–Ω–µ–¥–∂–µ—Ä –ª–æ–≥—ñ–≤"
        ],
        "answer": 0,
        "explanation": "Jenkins ‚Äî —Å–∏—Å—Ç–µ–º–∞ CI/CD –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—ó —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è, –∑–±—ñ—Ä–∫–∏ —Ç–∞ –¥–µ–ø–ª–æ—é."
    },
    {
        "question": "–©–æ —Ç–∞–∫–µ test suite?",
        "options": [
            "–û–¥–∏–Ω —Ç–µ—Å—Ç-–∫–µ–π—Å",
            "–ì—Ä—É–ø–∞ —Ç–µ—Å—Ç-–∫–µ–π—Å—ñ–≤",
            "–ë–∞–≥-—Ä–µ–ø–æ—Ä—Ç",
            "CI-—Å–µ—Ä–≤–µ—Ä"
        ],
        "answer": 1,
        "explanation": "Test Suite ‚Äî –Ω–∞–±—ñ—Ä —Ç–µ—Å—Ç-–∫–µ–π—Å—ñ–≤, —â–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å –ø–æ–≤'—è–∑–∞–Ω–∏–π —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª."
    },
    {
        "question": "–©–æ —Ç–∞–∫–µ boundary value analysis?",
        "options": [
            "–¢–µ—Ö–Ω—ñ–∫–∞ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è, —è–∫–∞ –ø–µ—Ä–µ–≤—ñ—Ä—è—î –≥—Ä–∞–Ω–∏—á–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è",
            "–ê–Ω–∞–ª—ñ–∑ –¥–∏–∑–∞–π–Ω—É",
            "–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó",
            "–ú–µ—Ç–æ–¥ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è"
        ],
        "answer": 0,
        "explanation": "Boundary Value Analysis ‚Äî —Ç–µ—Ö–Ω—ñ–∫–∞ —Ç–µ—Å—Ç-–¥–∏–∑–∞–π–Ω—É –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –∫—Ä–∞–π–Ω—ñ—Ö –∑–Ω–∞—á–µ–Ω—å."
    },
    {
        "question": "–©–æ —Ç–∞–∫–µ TestRail?",
        "options": [
            "–°–∏—Å—Ç–µ–º–∞ –∫–µ—Ä—É–≤–∞–Ω–Ω—è —Ç–µ—Å—Ç-–∫–µ–π—Å–∞–º–∏",
            "–Ü–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –º–∞–ª—é–≤–∞–Ω–Ω—è –¥—ñ–∞–≥—Ä–∞–º",
            "–°–µ—Ä–≤—ñ—Å –¥–ª—è –ª–æ–≥—ñ–≤",
            "–ë–∞–≥-—Ç—Ä–µ–∫–µ—Ä"
        ],
        "answer": 0,
        "explanation": "TestRail ‚Äî –ø–æ–ø—É–ª—è—Ä–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–∞ –∑–∞–ø—É—Å–∫—É —Ç–µ—Å—Ç-–∫–µ–π—Å—ñ–≤."
    },
    {
        "question": "–©–æ –æ–∑–Ω–∞—á–∞—î —Ç–µ—Ä–º—ñ–Ω 'defect leakage'?",
        "options": [
            "–ö—ñ–ª—å–∫—ñ—Å—Ç—å –¥–µ—Ñ–µ–∫—Ç—ñ–≤, —â–æ –ø—Ä–æ–π—à–ª–∏ –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–Ω",
            "–†—ñ–≤–µ–Ω—å –ø–æ–∫—Ä–∏—Ç—Ç—è –∫–æ–¥—É",
            "–®–≤–∏–¥–∫—ñ—Å—Ç—å —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è",
            "–ó–∞–≥–∞–ª—å–Ω–∏–π —á–∞—Å –±–∞–≥—Ñ—ñ–∫—Å—ñ–≤"
        ],
        "answer": 0,
        "explanation": "Defect leakage ‚Äî –±–∞–≥–∏, —â–æ –Ω–µ –±—É–ª–∏ –∑–Ω–∞–π–¥–µ–Ω—ñ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è–º —ñ –ø–æ—Ç—Ä–∞–ø–∏–ª–∏ –¥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞."
    },
    {
        "question": "–©–æ —Ç–∞–∫–µ regression suite?",
        "options": [
            "–ù–∞–±—ñ—Ä —Ç–µ—Å—Ç—ñ–≤ –¥–ª—è –Ω–æ–≤–æ–≥–æ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—É",
            "–ù–∞–±—ñ—Ä –≤–∏–ø–∞–¥–∫–æ–≤–∏—Ö —Ç–µ—Å—Ç—ñ–≤",
            "–ù–∞–±—ñ—Ä —Ç–µ—Å—Ç—ñ–≤ –¥–ª—è smoke-—Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è",
            "–ù–∞–±—ñ—Ä —Ç–µ—Å—Ç—ñ–≤ –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —Å—Ç–∞—Ä–æ–≥–æ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—É –ø—ñ—Å–ª—è –∑–º—ñ–Ω"
        ],
        "answer": 3,
        "explanation": "Regression Suite ‚Äî —Ü–µ –Ω–∞–±—ñ—Ä —Ç–µ—Å—Ç—ñ–≤ –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏, —á–∏ –ø—Ä–∞—Ü—é—î –≤—Å–µ –ø—ñ—Å–ª—è –∑–º—ñ–Ω —É –∫–æ–¥—ñ."
    },
    {
        "question": "–©–æ —Ç–∞–∫–µ exploratory session?",
        "options": [
            "–ü–ª–∞–Ω–æ–≤–∞–Ω–µ –¥–æ—Å–ª—ñ–¥–Ω–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –±–µ–∑ —Å—Ü–µ–Ω–∞—Ä—ñ—ó–≤",
            "–Ü–Ω—Ç–µ—Ä–≤'—é –∑ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–µ–º",
            "–†–æ–∑—Å–∏–ª–∫–∞ –±–∞–≥—ñ–≤",
            "–ü—Ä–µ–∑–µ–Ω—Ç–∞—Ü—ñ—è —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É"
        ],
        "answer": 0,
        "explanation": "Exploratory session ‚Äî –∫–æ–ª–∏ —Ç–µ—Å—Ç–µ—Ä –≤–∏–≤—á–∞—î —Å–∏—Å—Ç–µ–º—É –±–µ–∑ –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –ø–ª–∞–Ω—É."
    }
]

user_data = {}

def get_keyboard(options):
    keyboard = [[KeyboardButton(text=chr(65 + i))] for i in range(len(options))]
    return ReplyKeyboardMarkup(keyboard=keyboard, resize_keyboard=True)

@dp.message(Command("start"))
async def cmd_start(message: types.Message):
    user_id = message.from_user.id
    questions_copy = random.sample(all_questions, k=min(50, len(all_questions)))  # 50 —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤
    user_data[user_id] = {
        "score": 0,
        "total": 0,
        "questions": questions_copy,
        "current": None
    }
    await send_question(message)

async def send_question(message: types.Message):
    user_id = message.from_user.id
    data = user_data[user_id]

    if not data["questions"]:
        percent = round(data["score"] / data["total"] * 100) if data["total"] > 0 else 0
        await message.answer(
            f"üèÅ –ö–≤—ñ–∑ –∑–∞–≤–µ—Ä—à–µ–Ω–æ!\n"
            f"‚úÖ –í–∏ –≤—ñ–¥–ø–æ–≤—ñ–ª–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞ {data['score']} –∑ {data['total']}.\n"
            f"üéØ –¢–æ—á–Ω—ñ—Å—Ç—å: {percent}%\n\n–ù–∞—Ç–∏—Å–Ω—ñ—Ç—å /start —â–æ–± –ø–æ—á–∞—Ç–∏ –∑–Ω–æ–≤—É.",
            reply_markup=types.ReplyKeyboardRemove()
        )
        return

    question = data["questions"].pop(0)
    data["current"] = question

    text = f"üß† *–ü–∏—Ç–∞–Ω–Ω—è {data['total'] + 1}/50:*\n{question['question']}\n\n"
    for i, opt in enumerate(question["options"]):
        text += f"{chr(65 + i)}) {opt}\n"

    keyboard = get_keyboard(question["options"])
    await message.answer(text, reply_markup=keyboard, parse_mode="Markdown")

@dp.message(F.text.in_({"A", "B", "C", "D"}))
async def handle_answer(message: types.Message):
    user_id = message.from_user.id
    data = user_data.get(user_id)

    if not data or not data.get("current"):
        await message.answer("–ù–∞—Ç–∏—Å–Ω—ñ—Ç—å /start —â–æ–± –ø–æ—á–∞—Ç–∏ —Å–ø–æ—á–∞—Ç–∫—É.")
        return

    user_answer = message.text.strip().upper()
    question = data["current"]
    correct_letter = chr(65 + question["answer"])

    data["total"] += 1
    if user_answer == correct_letter:
        data["score"] += 1
        response = "‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ!"
    else:
        correct_text = question["options"][question["answer"]]
        response = f"‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ! –ü—Ä–∞–≤–∏–ª—å–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å: {correct_letter}) {correct_text}"

    response += f"\nüí° {question['explanation']}"
    response += f"\n\nüéØ –†–∞—Ö—É–Ω–æ–∫: {data['score']}/{data['total']}"
    await message.answer(response)

    await send_question(message)

async def main():
    print("ü§ñ –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω–∏–π!")
    await dp.start_polling(bot)

if __name__ == "__main__":
    asyncio.run(main())